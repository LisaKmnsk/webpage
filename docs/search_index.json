[["index.html", "Data Science in Finance Chapter 1 Welcome!", " Data Science in Finance Ryan Riordan &amp; Teaching Assistants 2022-12-16 Chapter 1 Welcome! Here you will find the course pages of the project course Data Science in Finance. The course is offered regularly in the summer term and aims at providing in-depth knowledge about the programming language Python and its most important libraries for data analysis. Students will learn to develop structured approaches for solving practical problems in a financial context using statistical methods. The final grade will be determined based on a case study of a financial dataset. This https://rstudio4edu.github.io/rstudio4edu-book/book-dress.html is great. "],["hello.html", "Chapter 2 Hello", " Chapter 2 Hello Here you can find the landing page! "],["lecture-material.html", "Chapter 3 Lecture Material 3.1 Glosten and Milgrom - Sequential Trading 3.2 Tasks 3.3 (b) Draw the probability tree with the underlying probabilities, assuming \\(\\theta = 0.5\\), \\(\\mu = 0.5\\) and \\(\\gamma_B = \\gamma_S = 0.5\\). 3.4 (c) Calculate the conditional probability of observing a sell order, given \\(V^{low}\\) and \\(V^{high}\\). 3.5 (d) Calculate the a priori probability of observing a reduction in price, when the order is a sell order. 3.6 (e) What are the bid and ask quotes the market maker is going to set, assuming \\(V^{low} = 0\\) and \\(V^{high} = 1\\)? 3.7 (f) Explain what the prior is in the Bayes Theorem and why it is important. 3.8 Kyle - Strategic Trading 3.9 Tasks 3.10 (a) Explain the fundamental assumptions and initial setting of the model. 3.11 (b) How does the model relate to the concept of Adverse Selection? 3.12 (c) Explain the strategy of the informed trader based on the model. 3.13 (d) Explain the strategy of the market maker’s price setting. 3.14 (e) What do the equilibrium equations imply? 3.15 (f) How can lambda be interpreted as a measure of liquidity? 3.16 (g) Calculate the price volatility of the model.", " Chapter 3 Lecture Material 3.1 Glosten and Milgrom - Sequential Trading Assume the following model of sequential trading based on the theory of Glosten and Milgrom (1985). The bid ask spread illustrates the cost of immediacy and consists of a transaction cost component and a component of adverse selection. Assume the parameter of \\(\\theta\\) indicating the probability of receiving or news, equivalent to the price \\(V\\) moving upwards \\(V^{high}\\) or downwards \\(V^{low}\\). Let \\(\\mu\\) capture the probability of an informed trader executing an order with \\(T^{inf}\\) for and \\(T^{uninf}\\) for traders. \\[ \\begin{aligned} &amp; \\text{Price Evolvement}: &amp; V \\sim B(p=\\theta) \\\\ &amp; \\text{Trader Type}: &amp; T \\sim B(p=\\mu) \\\\ \\end{aligned} \\] 3.2 Tasks 3.2.1 (a) What are the basic assumptions of the Glosten-Milgrom model? quote driven market (bid-ask prices) trade size equals unity one trade per period no explicit transaction costs no inventory constraints In the setting of Glosten and Milgrom, the market maker faces a problem of Adverse Selection as he loses when trading with informed traders. Informed traders are more likely to buy the asset in presence of good news and more likely to sell the asset in presence of bad news. Hence, the direction of the trade conveys information about the true value of the asset. The bid price therefore pictures the expected value of the asset given a trader wants to sell the asset \\(E(V|S)\\) while the ask price pictures the expected value of the asset given a trader wants to buy the asset \\(E(V|B)\\). 3.3 (b) Draw the probability tree with the underlying probabilities, assuming \\(\\theta = 0.5\\), \\(\\mu = 0.5\\) and \\(\\gamma_B = \\gamma_S = 0.5\\). Based on the underlying distribution assumption we can extract the probabilities as \\[ \\begin{aligned} P(V=V^{high}) &amp; = \\theta \\\\ &amp; = 1 - P(V = V^{low}) \\\\ &amp; = 1 - \\theta \\\\ &amp; = 0.5 \\\\ P(T=T^{inf}) &amp; = \\mu \\\\ &amp; = 1 - P(T=T^{uninf}) \\\\ &amp; = 1 - \\mu \\\\ &amp; = 0.5 \\\\ \\end{aligned} \\] With the following probabilities of an informed or uninformed trader, selling or buying assets. \\[ \\begin{aligned} P(S|V^{low} \\cap T^{inf}) &amp; = P(B|V^{high} \\cap T^{inf}) = 1 \\\\ P(S|V^{low} \\cap T^{uninf}) &amp; = P(B|V^{high} \\cap T^{uninf}) = \\gamma_B = \\gamma_S = 0.5 \\\\ \\end{aligned} \\] An informed trader will sell the asset if \\(V=V^{low}\\) and buy if \\(V=V^{high}\\) with a probability of \\(1\\), whereas an uninformed trader faces equal probability to buy \\(\\gamma_B\\) and sell \\(\\gamma_S\\) the asset. Resulting in the following tree 3.4 (c) Calculate the conditional probability of observing a sell order, given \\(V^{low}\\) and \\(V^{high}\\). Recall that according to the law of total probability it holds that \\[ \\begin{aligned} &amp; P(A|C) = \\sum_i P(A|C \\cap B_i) \\cdot P(B_i). \\\\ \\end{aligned} \\] Therefore we obtain for the single conditional probabilities \\[ \\begin{aligned} P(S|V^{low}) &amp; = \\sum_i P(S|V^{low} \\cap T_i) \\cdot P(T_i) \\\\ &amp; = P(S|V^{low} \\cap T^{inf}) \\cdot P(T^{inf}) + P(S|V^{low} \\cap T^{uninf}) \\cdot P(T^{uninf}) \\\\ &amp; = 1 \\cdot 0.5 + 0.5 \\cdot 0.5 \\\\ &amp; = 0.75 \\\\ \\end{aligned} \\] and \\[ \\begin{aligned} P(S|V^{high}) &amp; = \\sum_i P(S|V^{high} \\cap T_i) \\cdot P(T_i) \\\\ &amp; = P(S|V^{high} \\cap T^{inf}) \\cdot P(T^{inf}) + P(S|V^{high} \\cap T^{uninf}) \\cdot P(T^{uninf}) \\\\ &amp; = 0 \\cdot 0.5 + 0.5 \\cdot 0.5 \\\\ &amp; = 0.25. \\\\ \\end{aligned} \\] 3.5 (d) Calculate the a priori probability of observing a reduction in price, when the order is a sell order. The market maker uses the Bayes Theorem to update the underlying beliefs of \\(V\\). According to the Bayes-Theorem it holds that \\[ \\begin{aligned} P(A|B) &amp; = \\frac{P(B|A) \\cdot P(A)}{ \\sum_i P(B|A_i) \\cdot P(A_i)}. \\\\ \\end{aligned} \\] Consequently, we can apply the formula to the problem set at hand, resulting in \\[ \\begin{aligned} P(V^{low}|S) &amp; = \\frac{P(S|V=V^{low}) \\cdot P(V=V^{low})}{P(S|V=V^{low}) \\cdot P(V=V^{low}) + P(S|V=V^{high}) \\cdot P(V=V^{high})} \\\\ &amp; = \\frac{0.75 \\cdot 0.5}{0.75 \\cdot 0.5 + 0.25 \\cdot 0.5} \\\\ &amp; = 0.75 \\\\ \\end{aligned} \\] The probabilities capture market maker’s posterior belief that \\(V=V^{low}\\) if a sale occurs. If a sell order occurs, there is a probability of \\(75\\%\\) that the asset value is now \\(V=V^{low}\\). 3.6 (e) What are the bid and ask quotes the market maker is going to set, assuming \\(V^{low} = 0\\) and \\(V^{high} = 1\\)? The bid and ask quotes are set according to the average probabilities of observing a conditional buy or sell. \\[ \\begin{aligned} &amp; E(A|B) = \\sum_i P(A_i|B) \\cdot A_i \\\\ \\end{aligned} \\] \\[ \\begin{aligned} &amp; \\text{Ask-Price}: &amp; E(V|B) &amp; = V^{low} \\cdot P(V^{low}|B) + V^{high} \\cdot P(V^{high}|B) \\\\ &amp;&amp;&amp; = 0 \\cdot 0.25 + 1 \\cdot 0.75 \\\\ &amp;&amp;&amp; = 0.75 \\\\ &amp; \\text{Bid-Price}: &amp; E(V|S) &amp; = V^{low} \\cdot P(V^{low}|S) + V^{high} \\cdot P(V^{high}|S) \\\\ &amp;&amp;&amp; = 0 \\cdot 0.75 + 1 \\cdot 0.25 \\\\ &amp;&amp;&amp; = 0.25 \\\\ \\end{aligned} \\] The initial spread will be proportional to the fraction of informed traders. It essentially protects the market maker from being subject to adverse selection due to trading with informed traders. After the first trade, the market maker updates his beliefs about the underlying value and revises the quotes by using updated posterior probabilities. 3.7 (f) Explain what the prior is in the Bayes Theorem and why it is important. The Bayes Theorem consists of four main components. \\[ \\begin{aligned} \\textcolor{green}{P(A|B)} &amp; = \\frac{\\textcolor{orange}{P(B|A)} \\cdot \\textcolor{blue}{P(A)}}{\\textcolor{pink}{P(B|A_i) \\cdot P(A_i) + P(B|A_j) \\cdot P(A_j)}}. \\\\ \\end{aligned} \\] : Given the observed evidence \\(B\\), how probable is the observation of \\(A\\). If we are to observe a sell order (evidence), how likely is is that the true value of the asset accounts to \\(V^{low}\\)? : Given the observation of \\(A\\) is true, how probable is the observation of evidence \\(B\\). Under the assumption that \\(V^{low}\\) depicts the true value of the asset, how likely is the observation of a sell order? : What is the probability of observing A before observing the evidence? How probable is it that the true value of the asset is lower than its current value? : How likely is the evidence under all possible realizations of A? What is the likelihood of observing a sell order? After the execution of the next trade the likelihood and the marginal probability of the event are going to change based on the direction of the trade. This results in an updated posterior probability. 3.8 Kyle - Strategic Trading Assume the following model of strategic trading based on the theory of Kyle (1985) in \\(t_0\\) \\[ \\begin{aligned} &amp; \\text{Liquidation Value}: &amp;&amp; v \\sim N(p_0, \\Sigma_0) \\\\ &amp; \\text{Net Order Flow (uninformed)}: &amp;&amp; u \\sim N(0, \\sigma_u) \\\\ &amp; \\text{Net Order Flow (informed)}: &amp;&amp; x \\\\ &amp; \\text{Aggregated Order Flow}: &amp;&amp; y = u + x \\\\ &amp; \\text{Clearing Price}: &amp;&amp; p = \\lambda y + \\mu \\\\ \\end{aligned} \\] 3.9 Tasks 3.10 (a) Explain the fundamental assumptions and initial setting of the model. : The model only comprises a single trading period in \\(t_0\\). The trades refer to a single asset that has a random liquidation value \\(v\\) by the end of the period. : The informed trader is assumed to have an advanced level of private information to infer with certainty about the liquidation value \\(v\\) of the asset by the end of the period, \\(t_1\\). The trader choses to submit a market order that maximizes his expected profit which comprises the buying of \\(x\\) quantities of the asset. : The market order submission of uninformed noise traders is random and exogenous to the model. As a group, the noise traders submit an order to buy \\(u\\) shares of the asset. Their incentive to trade is based on idiosyncratic reasons and therefore independent in sign and amplitude of \\(x\\). : The market maker receives information about the aggregated quantity traded as \\(y\\). However, he cannot distinguish between the quantity submitted by informed and uninformed traders. The market maker does not face inventory constraints limiting his position and sets the price \\(p\\) in such a way that he breaks even on average. 3.11 (b) How does the model relate to the concept of Adverse Selection? Adverse Selection assumes informational differences amongst the subjects interacting within the model. The informed trader holds information the market maker does not have and therefore might engage in opportunistic behavior by maximizing self-utility, while the market maker is not able to differentiate between the actual signal \\(v\\) and noise, given the setting of anonymized trades. The model of strategic trading by Kyle illustrates how price impact can arise if market makers anticipate Adverse Selection in an auction setting. 3.12 (c) Explain the strategy of the informed trader based on the model. The aim of the informed trader is to maximize his expected profit, given the clearing price \\(p\\) that the market maker is going to choose. The expected profit is determined as \\[ \\begin{aligned} \\pi &amp; = (v-p)x. \\\\ \\end{aligned} \\] The informed trader conjectures that the market maker will use a price adjustment rule that is linear in aggregate order flow, which accounts to \\[ p = \\mu + \\lambda y. \\] If the market maker uses a linear pricing rule to determine the prices, the informed trader should also use a linear trading rule. The informed trader’s profits are determined by \\[ \\begin{aligned} \\pi &amp; = (v - p)x \\\\ &amp; = [v - (\\lambda y + \\mu)]x \\\\ &amp; = [v - (\\lambda (u + v) + \\mu)]x \\\\ \\end{aligned} \\] with an expected profit of \\[ \\begin{aligned} E(\\pi) &amp; = [v - \\lambda x - \\mu] x \\\\ &amp; = -\\lambda x^2 + [v - \\mu]x, \\\\ \\end{aligned} \\] given \\(E(u) = 0\\), \\(E(v)=p_0\\), \\(E(x)=x\\), \\(E(u^2)= \\sigma_u^2\\) and \\(E(uv)=0\\). In order to maximize his profits, the informed trader will set the quantity \\(x\\) he trades based on the first order condition \\[ \\begin{aligned} \\frac{\\partial E(\\pi)}{\\partial x} &amp; = -2 \\lambda x + (v-p) \\stackrel{!}{=} 0 \\\\ x &amp; = \\frac{v - \\mu}{2\\lambda} \\\\ &amp; = \\frac{1}{2\\lambda} \\cdot v - \\frac{\\mu}{2\\lambda} \\\\ &amp; = \\beta v + a \\\\ &amp; = a + \\beta v. \\end{aligned} \\] The following sections will derive the value of \\(\\mu\\) and \\(\\lambda\\). 3.13 (d) Explain the strategy of the market maker’s price setting. The market maker assumes the informed trader will use an order flow generation strategy being linear to the signal \\[ x = a + \\beta v \\] with \\(v\\) indicating the signal. Given the assumption that \\(u\\) is a Gaussian random variable, the market maker can infer that a greater aggregated order flow \\(y\\) increases the change of \\(x\\) being large because the insider knows that \\(v &gt; p_0\\). Accordingly, the market maker will set \\(p\\) higher than otherwise. Analogously, if \\(y\\) is low, \\(x\\) will likely be lower as well because the insider knows about \\(v &lt; p_0\\) and therefore submits a sell instead of a buy order. In this case, the market maker sets \\(p\\) lower than otherwise. The assumptions allow for equality between \\[ a + v \\beta \\stackrel{!}{=} \\frac{v - \\mu}{2 \\lambda}. \\] The market maker will now need to chose the market price based on \\(p = E(v|y)\\). The price is set according to the following projection theorem of two Gaussian random variables \\[ E(y|x) = E(y) + \\frac{cov(x,y)\\cdot[x-E(x)]}{var(x)} \\] Applying the lemma to the underlying problem yields \\[ \\begin{aligned} p &amp; = E(v|y) \\\\ &amp; = E(v) + \\frac{cov(v,y)\\cdot[y-E(y)]}{var(y)} \\\\ &amp; = p_0 + \\frac{cov(v,u+x)\\cdot[y-E(u+x)]}{var(u+x)} \\\\ &amp; = p_0 + \\frac{cov(v,u+(a+v\\beta))\\cdot[y-E(u+(a+v\\beta))]}{var(u+(a+v\\beta))} \\\\ &amp; = p_0 + \\frac{ \\beta \\Sigma_0 \\cdot[y-a - p_0\\beta))]}{ \\sigma_u^2 + \\beta^2 \\Sigma_0} \\\\ &amp; = \\frac{ \\beta \\Sigma_0}{ \\sigma_u^2 + \\beta^2 \\Sigma_0}y + p_0 \\cdot \\frac{\\sigma_u^2 + \\beta^2 \\Sigma_0}{ \\sigma_u^2 + \\beta^2 \\Sigma_0} + \\frac{ \\beta \\Sigma_0 \\cdot (-a - p_0 \\beta)}{ \\sigma_u^2 + \\beta^2 \\Sigma_0} \\\\ &amp; = \\frac{ \\beta \\Sigma_0}{ \\sigma_u^2 + \\beta^2 \\Sigma_0}y + \\frac{ -a \\beta \\Sigma_0 + p_0 \\sigma_u^2}{ \\sigma_u^2 + \\beta^2 \\Sigma_0} \\\\ &amp; = \\lambda y + \\mu,\\\\ \\end{aligned} \\] with \\[ \\begin{aligned} cov(v,u+(a+v\\beta)) &amp; = E[(v - E(v)) \\cdot (u+a+v\\beta - E(u+a+v\\beta))]\\\\ &amp; = E[(v - p_0) \\cdot (u + v \\beta - p_0 \\beta)] \\\\ &amp; = E[vu + v \\beta(v - p_0) - p_0u - p_0 \\beta(v - p_0)] \\\\ &amp; = \\Sigma_0 \\beta - p_0^2 \\beta + p_0^2 \\beta \\\\ &amp; = \\Sigma_0 \\beta. \\end{aligned} \\] Therefore, it follows that \\[ \\begin{aligned} \\lambda &amp; = \\frac{ \\beta \\Sigma_0}{ \\sigma_u^2 + \\beta^2 \\Sigma_0} \\\\ \\mu &amp; = \\frac{ -a \\beta \\Sigma_0 + p_0 \\sigma_u^2}{ \\sigma_u^2 + \\beta^2 \\Sigma_0}. \\\\ \\end{aligned} \\] Simplifying the preceding results by substitution with \\(a = - \\frac{\\mu}{2 \\lambda}\\) and \\(\\beta = \\frac{1}{2\\lambda}\\) yields \\[ \\begin{aligned} a &amp; = - p_0 \\frac{\\sqrt{\\sigma_u^2}}{ \\sqrt{\\Sigma_0}} \\\\ \\mu &amp; = p_0 \\\\ \\lambda &amp; = \\frac{\\sqrt{\\Sigma_0}}{2 \\sqrt{\\sigma_u^2}} \\\\ \\beta &amp; = \\frac{\\sqrt{\\sigma_u^2}}{\\sqrt{\\Sigma_0}}. \\end{aligned} \\] Thus, we obtain we equilibrium quantity of \\(x\\) and price \\(p\\) as \\[ \\begin{aligned} x &amp; = a + \\beta v = \\frac{\\sqrt{\\sigma_u^2}}{\\sqrt{\\Sigma_0}} (v-p_0) \\\\ p &amp; = \\lambda y + \\mu = \\frac{\\sqrt{\\Sigma_0}}{2\\sqrt{\\sigma_u^2}} y + p_0. \\\\ \\end{aligned} \\] 3.14 (e) What do the equilibrium equations imply? The equilibrium establishes a pricing rule chosen by the market maker and a trading strategy by the insider in a way that maximizes the insider’s expected profit, given the market maker’s pricing rule. The price is set by the market maker to earn zero expected profit, given the trading strategy of the informed trader. Given the equilibrium order \\(x\\) of the informed trader, the ordered quantity will increase (decrease) linear to the difference between liquidation value \\(v\\) and price \\(p_0\\), increase (decrease) if the volatility of the order flow \\(\\sigma_u^2\\) is large (small), decrease (increase) if the volatility of the order flow \\(\\sigma_u^2\\) is large (small). Given a clearing price of \\(p\\) the price will increase (decrease) linear to the aggregated order flow \\(y\\), increase (decrease) if the volatility of the liquidation value \\(\\Sigma_0\\) is large (small), decrease (increase) if the volatility of the order flow \\(\\sigma_u^2\\) is large (small). Some substitution allows to rewrite the equilibrium price as \\[ \\begin{aligned} p &amp; = p_0 + \\frac{1}{2} \\frac{\\sqrt{\\Sigma_0}}{\\sqrt{\\sigma_u^2}} (x + u) \\\\ &amp; = \\frac{1}{2} (\\frac{\\sqrt{\\Sigma_0}}{\\sqrt{\\sigma_u^2}} u + p_0 + v), \\end{aligned} \\] indicating that only half of the informed trader’s information \\(\\frac{1}{2} v\\) is reflected within the equilibrium price. The equilibrium price is therefore fully revealing. A fully revealing price would be \\(p=v\\). 3.15 (f) How can lambda be interpreted as a measure of liquidity? The parameter \\(\\lambda\\) can be expressed in a range of forms. \\[ \\begin{aligned} \\lambda &amp; = \\frac{1}{2} \\frac{v-p_0}{x} \\\\ \\lambda &amp; = \\frac{p - p_0}{y} \\\\ \\lambda &amp; = \\frac{\\sqrt{\\Sigma_0}}{2 \\sqrt{\\sigma_u^2}} \\\\ \\end{aligned} \\] The technical notation illustrates a ratio between some form of return,e.g. \\(p - p_0\\), divided by some form of trade volume \\(x\\) or \\(y\\), the order flow. For liquid stocks the lambda will be small since for a given level of trading volume changes in price are comparatively small. Alternatively, the higher the proportion of the noise traders \\(\\sigma_u^2\\), relative to the insider information \\(\\Sigma_0\\), the more liquid the market. Lambda can also be interpreted as the amount the market maker raises the price when the aggregated order flow increases by one unit. 3.16 (g) Calculate the price volatility of the model. \\[ \\begin{aligned} Var(p) &amp; = Var(\\mu + \\lambda y) \\\\ &amp; = Var(\\mu) + \\lambda^2 Var(y) \\\\ &amp; = \\lambda^2 [Var(x) + Var(u)]\\\\ &amp; = \\lambda^2 [Var(x) + \\sigma_u^2]\\\\ &amp; = \\lambda^2 [Var(a + v \\beta) + \\sigma_u^2] \\\\ &amp; = \\lambda^2 [\\beta^2 \\sigma_v^2 + \\sigma_u^2] \\end{aligned} \\] "],["structured-query-language.html", "Chapter 4 Structured Query Language 4.1 Introduction to SQL 4.2 Querying data 4.3 Filtering Data 4.4 Combining multiple tables", " Chapter 4 Structured Query Language 4.1 Introduction to SQL Structured Query Language (SQL) is commonly used to access and query large databases. 4.2 Querying data Using the python package we can establish a connection to the database. We need to provide the username, password, host and port to identify the database we want to connect to in the form “mysql://default_user:q7$?h!4Mx@10.153.30.58:3306”. import sqlalchemy as sa engine = sa.create_engine(&#39;mysql://default_user:q7$?h!4Mx@10.153.30.58:3306&#39;) connection = engine.connect() The basic syntax of SQL is structured as follows SELECT {item} FROM {database}.{datatable} {alias} WHERE {condition} {more} The wildcard * selects all columns of a table aapl_wrds_cqm and database taqmsec. SELECT * FROM taqmsec.aapl_wrds_cqm 4.3 Filtering Data We can further refine the query by allowing to filter for a set of conditions. SELECT * FROM taqmsec.aapl_wrds_ctm WHERE time(time) &gt;= &quot;09:30&quot; AND time(time) &lt;= &quot;16:00&quot; AND ex = &quot;P&quot; OR ex = &quot;O&quot; 4.4 Combining multiple tables To combine two tables we can either use UNION or JOIN SELECT *, (main.bid + main.ask)/2 as mid, (main.ask - main.bid) as spread FROM ((SELECT a.time, a.qu_seqnum as seq, &quot;q&quot; as item, NULL as price, NULL as quantity, NULL as sale_condition, a.bid as bid, a.bidsiz as bidsize, a.ask as ask, a.asksiz as asksize FROM cqm_opening_times a WHERE ex = &quot;P&quot;) UNION ALL (SELECT b.time, b.tr_seqnum as seq, &quot;t&quot; as item, b.price as price, b.size as quantity, b.tr_scond as sale_condition, NULL as bid, NULL as bidsize, NULL as ask, NULL as asksize FROM ctm_opening_times b WHERE ex = &quot;P&quot;)) as main ORDER BY time; "]]
